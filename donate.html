<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Donate - Iris Valley Non-profit</title><script src="https://cdn.tailwindcss.com"></script><link rel="icon" type="image/png" href="https://ik.imagekit.io/migbb/imagevalleu.ofg?updatedAt=1757810138178"></head><body class="bg-gray-50 text-gray-800 font-sans"><nav class="bg-gray-200 p-4 shadow-md"><div class="container mx-auto flex justify-between items-center"><a href="./index.html" class="flex items-center"><img src="https://ik.imagekit.io/migbb/imagevalleu.ofg?updatedAt=1757810138178" alt="Iris Valley Non-profit Logo" class="h-20"></a><button id="mobile-menu-button" class="sm:hidden text-gray-700 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-gray-500 rounded-md p-2"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><div class="hidden sm:flex space-x-6 text-lg"><a href="./index.html" class="text-gray-700 hover:text-gray-900 transition duration-300">Home</a><a href="./gallery.html" class="text-gray-700 hover:text-gray-900 transition duration-300">Gallery</a><a href="./events.html" class="text-gray-700 hover:text-gray-900 transition duration-300">Events</a><a href="./donate.html" class="text-gray-700 hover:text-gray-900 transition duration-300">Donate</a><a href="./contact.html" class="text-gray-700 hover:text-gray-900 transition duration-300">Contact</a></div></div><div id="mobile-menu" class="hidden sm:hidden mt-2 space-y-2 px-2 pb-3"><a href="./index.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition duration-300">Home</a><a href="./gallery.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition duration-300">Gallery</a><a href="./events.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition duration-300">Events</a><a href="./donate.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition duration-300">Donate</a><a href="./contact.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition duration-300">Contact</a></div></nav><header class="bg-gray-300 text-gray-900 py-16 text-center"><div class="container mx-auto"><h1 class="text-5xl font-extrabold mb-4">Support Iris Valley Non-profit</h1><p class="text-xl">Your contribution makes a difference in empowering communities.</p></div></header><main class="container mx-auto my-12 p-6 bg-white shadow-lg rounded-lg"><section class="mb-12 max-w-md mx-auto"><h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Make a Donation</h2><form id="donateForm" class="space-y-6"><div class="flex flex-col"><label for="amount" class="text-lg font-medium text-gray-700 mb-2">Donation Amount (USD):</label><input type="number" id="amount" name="amount" min="0.50" step="0.01" placeholder="e.g., 25.00" required class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent text-lg"></div><button type="submit" class="w-full bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-6 rounded-lg text-xl transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">Donate Now</button></form><p id="error-message" class="text-red-600 mt-4 text-center hidden">An error occurred. Please try again.</p><p class="text-sm text-gray-500 mt-4 text-center">All donations are processed securely via Stripe.</p></section></main><footer class="bg-gray-800 text-white py-8 mt-12"><div class="container mx-auto text-center"><p>&copy; 2025 Iris Valley Non-profit&trade;. All rights reserved.</p></div></footer><script src="https://js.stripe.com/v3/"></script><script>
    document.addEventListener('DOMContentLoaded', function() {
        const overlayImage = document.createElement('img');
        overlayImage.src = 'https://ik.imagekit.io/migbb/f632a446c61e4f5c01fa1271fcbfb129~tplv-tiktokx-cropcenter_1080_1080.jpeg?updatedAt=1757628902390';
        overlayImage.alt = 'Interactive Overlay';
        overlayImage.style.cssText = `
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: transform 0.2s ease-in-out;
        `;

        overlayImage.onmouseover = () => {
            overlayImage.style.transform = 'scale(1.1)';
        };
        overlayImage.onmouseout = () => {
            overlayImage.style.transform = 'scale(1)';
        };

        overlayImage.onclick = function() {
            window.location.href = 'https://dhruv.ftp.sh';
        };

        document.body.appendChild(overlayImage);

        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuButton && mobileMenu) {
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
        }

        // Stripe Integration
        const stripePublishableKey = 'pk_test_51S73xJBIjmogVQSWAST7nt0NGPTGg0P5BZsr1JDSKqTYRT6X31dlb7wBvO2U2wJ8Eg7LcnhJAQ1FmoSdfpwFh0cg00dtjdJjqk';
        const stripe = Stripe(stripePublishableKey);

        const donateForm = document.getElementById('donateForm');
        const amountInput = document.getElementById('amount');
        const errorMessage = document.getElementById('error-message');

        donateForm.addEventListener('submit', async function(event) {
            event.preventDefault();
            errorMessage.classList.add('hidden'); // Hide previous errors

            const amount = parseFloat(amountInput.value);

            if (isNaN(amount) || amount < 0.50) {
                errorMessage.textContent = 'Please enter a valid donation amount (minimum $0.50).';
                errorMessage.classList.remove('hidden');
                return;
            }

            try {
                const response = await fetch('/api/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ amount: amount }),
                });

                if (!response.ok) {
                    // Attempt to parse JSON error, fallback to text
                    let errorData;
                    try {
                        errorData = await response.json();
                    } catch (jsonError) {
                        errorData = { message: `Server error: ${response.status} ${response.statusText}` };
                        const rawText = await response.text();
                        console.error('Non-JSON error response from server:', rawText);
                    }
                    errorMessage.textContent = errorData.message || 'An unknown error occurred. Please try again.';
                    errorMessage.classList.remove('hidden');
                    console.error('Backend error:', errorData);
                    return;
                }

                const session = await response.json();

                if (session.id) {
                    const result = await stripe.redirectToCheckout({
                        sessionId: session.id,
                    });

                    if (result.error) {
                        errorMessage.textContent = result.error.message;
                        errorMessage.classList.remove('hidden');
                        console.error('Stripe checkout error:', result.error);
                    }
                } else {
                    errorMessage.textContent = 'Failed to create checkout session. No session ID returned.';
                    errorMessage.classList.remove('hidden');
                    console.error('No session ID in response:', session);
                }
            } catch (error) {
                errorMessage.textContent = 'Network error or unable to connect to server. Please check your connection.';
                errorMessage.classList.remove('hidden');
                console.error('Fetch error:', error);
            }
        });
    });
</script></body></html>